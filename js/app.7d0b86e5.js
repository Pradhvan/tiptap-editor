(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},s={app:0},a=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/tiptap-editor/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2a16":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("a026"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Article")},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor"},[n("editor-menu-bubble",{attrs:{editor:t.editor,"keep-in-bounds":t.keepInBounds},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.commands,s=e.isActive,a=e.menu,o=e.getMarkAttrs;return[n("ul",{staticClass:"highlight-menu",class:{"is-active":a.isActive||t.linkMenuIsActive}},[t.linkMenuIsActive?t._e():n("li",{staticClass:"menububble3__button",on:{click:i.bold}},[n("button",[n("i",{staticClass:"bold-icon",class:{"is-active":s.bold()}})])]),t.linkMenuIsActive?t._e():n("li",{staticClass:"menububble3__button",on:{click:i.italic}},[n("button",[n("i",{staticClass:"italic-icon",class:{"is-active":s.italic()}})])]),t.linkMenuIsActive?n("form",{staticClass:"menububble__form",on:{submit:function(e){return e.preventDefault(),t.setLinkUrl(i.link,t.linkUrl)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.linkUrl,expression:"linkUrl"}],ref:"linkInput",staticClass:"menububble__input",attrs:{type:"text",placeholder:"https://"},domProps:{value:t.linkUrl},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideLinkMenu(e)},input:function(e){e.target.composing||(t.linkUrl=e.target.value)}}}),n("button",{staticClass:"menububble__button",attrs:{type:"button"},on:{click:function(e){return t.setLinkUrl(i.link,null)}}},[t._v(" remove ")])]):n("li",{staticClass:"menububble__button",on:{click:function(e){t.showLinkMenu(o("link"))}}},[n("button",[n("i",{staticClass:"link-icon",class:{"is-active":s.link()}})])]),t.linkMenuIsActive?t._e():n("li",[n("button",[n("i",{staticClass:"separator-icon"})])]),t.linkMenuIsActive?t._e():n("li",{staticClass:"menubar__button",on:{click:function(t){return i.heading({level:3})}}},[n("button",[n("i",{staticClass:"large-heading-icon",class:{"is-active":s.heading({level:3})}})])]),t.linkMenuIsActive?t._e():n("li",{staticClass:"menubar__button",on:{click:function(t){return i.heading({level:5})}}},[n("button",[n("i",{staticClass:"small-heading-icon",class:{"is-active":s.heading({level:5})}})])]),t.linkMenuIsActive?t._e():n("li",{staticClass:"menububble__button",on:{click:i.blockquote}},[n("button",[n("i",{staticClass:"quote-icon",class:{"is-active":s.blockquote()}})])])])]}}])}),n("article",[n("editor-floating-menu",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.commands,s=e.isActive,a=e.menu;return[n("div",{staticClass:"editor__floating-menu",class:{"is-plus-active":a.isActive},style:"top: "+(a.top-20)+"px"},[n("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(e){return t.previewFiles(i.image)}}}),n("ul",{staticClass:"kitchensink"},[n("li",{on:{click:t.toggleFloatingMenu}},[n("i",{staticClass:"add-icon",class:{"close-icon":t.shouldShowFloatingMenu}})]),t.shouldShowFloatingMenu?n("li",{staticClass:"menubar__button",on:{click:function(e){return t.onClickImage()}}},[n("i",{staticClass:"image-icon"})]):t._e(),t.shouldShowFloatingMenu?n("li",{staticClass:"menubar__button",class:{"is-active":s.horizontal_rule()},on:{click:function(e){return t.onClickMenuItem(i.horizontal_rule)}}},[n("i",{staticClass:"separator-icon"})]):t._e(),t.shouldShowFloatingMenu?n("li",{staticClass:"menubar__button",class:{"is-active":s.ordered_list()},on:{click:function(e){return t.onClickMenuItem(i.ordered_list)}}},[n("i",{staticClass:"list-icon"})]):t._e(),t.shouldShowFloatingMenu?n("li",{class:{"is-active":s.embed()},on:{click:function(e){return t.onClickEmbed(i.embed,"video")}}},[n("i",{staticClass:"video-icon"})]):t._e(),t.shouldShowFloatingMenu?n("li",{class:{"is-active":s.embed()},on:{click:function(e){return t.onClickEmbed(i.embed,"link")}}},[n("i",{staticClass:"link-icon"})]):t._e(),t.shouldShowFloatingMenu?n("li",[n("i",{staticClass:"kitchensink-divider"})]):t._e(),t.shouldShowFloatingMenu?n("li",{class:{"is-active":s.lock()},style:"display: "+(t.hasLock?"none":"inline"),on:{click:function(e){return t.onClickMenuItem(i.lock)}}},[n("i",{staticClass:"lock-icon"})]):t._e()])])]}}])}),n("editor-content",{staticClass:"editor__content",attrs:{id:"editor",editor:t.editor}}),n("div",{staticClass:"ios"},[t._v("s")])],1)],1)},r=[],c=(n("b0c0"),n("ac1f"),n("466d"),n("cd42")),l=n("0da4"),u={props:{editor:{default:null,type:Object},keepInBounds:{default:!0,type:Boolean}},data:function(){return{menu:{isActive:!0,left:0,bottom:0}}},watch:{editor:{immediate:!0,handler:function(t){var e=this;t&&this.$nextTick((function(){t.registerPlugin(Object(l["a"])({dom:e.$el,render:function(){return!0}},!0))}))}}},render:function(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy:function(){this.editor.unregisterPlugin("menu_bubble")}},d=n("f23d"),p=n("986d"),h=n("9f12"),f=n("53fe"),b=n("8b83"),m=n("c65a"),v=n("c03e"),g=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(m["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(f["a"])(e,[{key:"schema",get:function(){return{content:"title block+"}}}]),e}(c["a"]),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[null===t.embeds.data&&!1===t.embeds.isLoading?n("div",{staticClass:"embed-input"},[n("i",{staticClass:"embed-link-icon"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.src,expression:"src"}],ref:"embedInput",attrs:{placeholder:t.placeholderText,type:"text",disabled:!t.view.editable},domProps:{value:t.src},on:{paste:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.src=e.target.value)}}}),n("button",{on:{click:t.onClickAdd}},[t._v("Add")])]):t._e(),null===t.embeds.data&&!0===t.embeds.isLoading?n("div",{staticClass:"embed-input"},[n("i",{staticClass:"loading-icon"}),n("span",[t._v(t._s(t.loadingText))])]):t._e(),t.embeds.data&&"video"===t.embeds.data.type?n("div",[n("iframe",{attrs:{src:t.embedUrl(t.embeds.data.url,t.embeds.data.provider_name)}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.caption,expression:"caption"}],attrs:{type:"text",disabled:!t.view.editable,placeholder:"write caption (optional)"},domProps:{value:t.caption},on:{keyup:t.handleKeyup,input:function(e){e.target.composing||(t.caption=e.target.value)}}})]):t._e(),t.embeds.data&&"link"===t.embeds.data.type?n("div",{staticClass:"embed-link-block",class:{"no-image":!t.embeds.data.thumbnail_url}},[n("div",{staticClass:"content"},[n("h1",[t._v(t._s(t.embeds.data.title))]),n("p",[t._v(t._s(t.embeds.data.description))]),n("span",[t._v(t._s(t.embeds.data.url))])]),t.embeds.data.thumbnail_url?n("figure",[n("img",{attrs:{src:t.embeds.data.thumbnail_url,alt:"Trulli"}})]):t._e()]):t._e()])},w=[],y=(n("99af"),n("d3b7"),n("4d63"),n("25f0"),n("1276"),n("96cf"),n("bc3a")),_=n.n(y),O={name:"Embed",props:["node","updateAttrs","view","getPos","options"],data:function(){return{embeds:{isLoading:!1,isError:!1,data:null}}},mounted:function(){var t=this;this.validURL(this.src)?this.embeds.data={iframeUrl:this.src}:this.src||this.$nextTick((function(){t.$refs.embedInput.focus()}))},computed:{src:{get:function(){return this.node.attrs.src},set:function(t){this.updateAttrs({src:t})}},caption:{get:function(){return this.node.attrs.caption},set:function(t){this.updateAttrs({caption:t})}},placeholderText:function(){return"link"===this.node.attrs.embedType?"Paste or type a link":"Paste or type a video"},loadingText:function(){return"link"===this.node.attrs.embedType?"Linking video":"Embedding video"}},methods:{onClickAdd:function(){var t,e,n,i,s;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(this.src){a.next=2;break}return a.abrupt("return");case 2:if(t=this.validURL(this.src),t){a.next=7;break}this.createAndMovetoNextParagraph(),a.next=29;break;case 7:return this.embeds.isLoading=!0,this.embeds.isError=!1,a.prev=9,a.next=12,regeneratorRuntime.awrap(_()("".concat(this.options.baseUrl,"?url=").concat(this.src)));case 12:e=a.sent,this.embeds.data=e.data,this.src=e.data.iframeUrl,a.next=20;break;case 17:a.prev=17,a.t0=a["catch"](9),this.embeds.isError=!0;case 20:return a.prev=20,n=this.getPos(),this.embeds.isLoading=!1,i=this.view.state.tr,s=c["j"].create(i.doc,n+1,n+1),i=i.setSelection(s),this.view.dispatch(i),this.view.focus(),a.finish(20);case 29:case"end":return a.stop()}}),null,this,[[9,17,20,29]])},createAndMovetoNextParagraph:function(){var t=this.view.state,e=t.tr,n=t.schema,i=this.getPos(),s=c["j"].create(e.doc,i,i+1);e=e.setSelection(s).insertText(this.src);var a=n.nodes["paragraph"];e=e.insert(i+this.src.length+2,a.create()),s=c["j"].create(e.doc,i+this.src.length+2,i+this.src.length+2),e=e.setSelection(s),this.view.dispatch(e),this.view.focus()},validURL:function(t){var e=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return!!e.test(t)},embedUrl:function(t,e){return"YouTube"!==e?t:"https://www.youtube.com/embed/"+t.split("=")[1]},handleKeyup:function(t){var e=this.view.state.tr,n=this.getPos();if("Backspace"!==t.key||this.caption){if("Enter"===t.key){var i=c["j"].create(e.doc,n+2,n+2);this.view.dispatch(e.setSelection(i)),this.view.focus()}}else{var s=c["j"].create(e.doc,n,n+1);this.view.dispatch(e.setSelection(s).deleteSelection(this.src)),this.view.focus()}}}},M=O,j=n("2877"),C=Object(j["a"])(M,k,w,!1,null,null,null),A=C.exports,x=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(m["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(f["a"])(e,[{key:"commands",value:function(t){var e=t.type;return function(t){return function(n,i){return i(n.tr.replaceSelectionWith(e.create(t)))}}}},{key:"name",get:function(){return"embed"}},{key:"defaultOptions",get:function(){return{embedType:"video"}}},{key:"schema",get:function(){return{attrs:{src:{default:null},caption:{default:null},embedType:{default:null}},group:"block",selectable:!1,parseDOM:[{tag:this.name,getAttrs:function(t){return{src:t.getAttribute("src"),caption:t.getAttribute("caption")}}}],toDOM:function(t){return["embed",t.attrs]}}}},{key:"view",get:function(){return{props:["node","updateAttrs","view","getPos","options"],components:{Embed:A},template:"\n        <Embed\n          :node='this.node'\n          :updateAttrs='this.updateAttrs'\n          :view='this.view'\n          :getPos='this.getPos'\n          :options='this.options'\n        ></Embed>\n      "}}}]),e}(c["g"]),S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",[n("img",{attrs:{src:t.src}}),n("figcaption",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.caption,expression:"caption"}],attrs:{placeholder:"Type caption for image (optional)"},domProps:{value:t.caption},on:{keyup:t.handleKeyup,input:function(e){e.target.composing||(t.caption=e.target.value)}}})])])},I=[],P={name:"Image",props:["node","updateAttrs","view","getPos"],computed:{src:{get:function(){return this.node.attrs.src},set:function(t){this.updateAttrs({src:t})}},caption:{get:function(){return this.node.attrs.caption},set:function(t){this.updateAttrs({caption:t})}}},mounted:function(){var t=this;this.$nextTick((function(){t.$el.scrollIntoView()}))},methods:{handleKeyup:function(t){var e=this.view.state.tr,n=this.getPos();if("Backspace"!==t.key||this.caption){if("Enter"===t.key){var i=c["j"].create(e.doc,n+2,n+2);this.view.dispatch(e.setSelection(i)),this.view.focus()}}else{var s=c["j"].create(e.doc,n,n+1);this.view.dispatch(e.setSelection(s).deleteSelection(this.src)),this.view.focus()}}}},F=P,T=Object(j["a"])(F,S,I,!1,null,null,null),E=T.exports,U=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(m["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(f["a"])(e,[{key:"commands",value:function(t){var e=t.type;return function(t){return function(n,i){var s=n.tr;s=s.replaceSelectionWith(e.create(t));var a=c["j"].create(s.doc,s.selection.head+2,s.selection.head+2);return s=s.setSelection(a).scrollIntoView(),i(s)}}}},{key:"schema",get:function(){return{attrs:{src:{},alt:{default:""},caption:{default:""}},group:"block",draggable:!0,selectable:!1,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),alt:t.getAttribute("alt"),caption:t.getAttribute("caption")}}}],toDOM:function(t){return["img",t.attrs]}}}},{key:"view",get:function(){return{props:["node","updateAttrs","view","getPos","options"],components:{ImageComponent:E},template:"\n        <ImageComponent\n          :node='this.node'\n          :updateAttrs='this.updateAttrs'\n          :view='this.view'\n          :getPos='this.getPos'\n          :options='this.options'\n        ></ImageComponent>\n      "}}}]),e}(d["g"]),L=n("a9de"),$=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(m["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(f["a"])(e,[{key:"commands",value:function(t){var e=t.type;return function(t){return function(n,i){var s=n.tr;s=s.replaceSelectionWith(e.create(t));var a=c["j"].create(s.doc,s.selection.head+1,s.selection.head+1);return s=s.setSelection(a),i(s)}}}},{key:"keys",value:function(t){var e=t.type,n=Object(L["a"])(L["b"],(function(t,n){return n(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0}));return{"Shift-l":n}}},{key:"name",get:function(){return"lock"}},{key:"defaultOptions",get:function(){return{text:"Only paid subscribers can see content below"}}},{key:"schema",get:function(){return{group:"block",selectable:!1,parseDOM:[{tag:this.name}]}}},{key:"view",get:function(){var t=this.options;return{data:function(){return{text:t.text}},props:["node","updateAttrs","view"],template:'\n        <div @paste.stop style="text-align:center" contenteditable="false">\n          {{text}}\n        </div>\n      '}}}]),e}(c["g"]),D=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(m["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(f["a"])(e,[{key:"name",get:function(){return"title"}},{key:"schema",get:function(){return{content:"inline*",parseDOM:[{tag:"h1"}],toDOM:function(){return["h1",0]}}}}]),e}(c["g"]),N=function(t){function e(){return Object(h["a"])(this,e),Object(b["a"])(this,Object(m["a"])(e).apply(this,arguments))}return Object(v["a"])(e,t),Object(f["a"])(e,[{key:"commands",value:function(t){var e=t.type;return function(t){return function(n,i){var s=n.tr;s=s.replaceSelectionWith(e.create(t));var a=c["j"].create(s.doc,s.selection.head+1,s.selection.head+1);return s=s.setSelection(a),i(s)}}}},{key:"schema",get:function(){return{group:"block",selectable:!1,parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}}}}]),e}(d["f"]),z=(n("2a16"),{name:"Article",components:{EditorContent:c["c"],EditorFloatingMenu:c["d"],EditorMenuBubble:u},data:function(){var t=this;return{imageSrc:"",data:null,shouldShowFloatingMenu:!1,editable:!0,linkUrl:null,linkMenuIsActive:!1,editor:new c["b"]({editable:!0,extensions:[new g,new D,new d["l"]({showOnlyCurrent:!1,emptyNodeText:this.emptyNodeText}),new d["c"],new d["d"]({levels:[3,5]}),new d["j"],new d["k"],new d["i"],new d["b"],new d["a"],new d["h"],new d["e"],new d["m"]({node:"paragraph",notAfter:["paragraph"]}),new U,new x({baseUrl:"http://139.59.32.245:8000/metadata"}),new N,new $],onUpdate:function(e){var n=e.getJSON;t.data=n()}})}},methods:{showLinkMenu:function(t){var e=this;this.linkUrl=t.href,this.linkMenuIsActive=!0,this.$nextTick((function(){e.$refs.linkInput.focus()}))},emptyNodeText:function(t){if("title"===t.type.name)return"Title";if(this.editor){var e=this.editor.state.doc.content.content;if(2===e.length&&!this.shouldShowFloatingMenu)return"Start your content here ..."}return""},hideLinkMenu:function(){this.linkUrl=null,this.linkMenuIsActive=!1},setLinkUrl:function(t,e){t({href:e}),this.hideLinkMenu()},toggleFloatingMenu:function(){this.shouldShowFloatingMenu=!this.shouldShowFloatingMenu},onClickMenuItem:function(t){t(),this.hideFloatingMenu()},onClickEmbed:function(t,e){t({embedType:e}),this.hideFloatingMenu()},onClickImage:function(){this.$refs.fileInput.click(),this.hideFloatingMenu()},hideFloatingMenu:function(){this.shouldShowFloatingMenu=!1},previewFiles:function(t){var e=this;this.editor.focus();var n=this.$refs.fileInput.files[0],i=/image.*/;if(n.type.match(i)){var s=new FileReader;s.onload=function(){var n=new U;n.src=s.result,e.imageSrc=n.src,t({src:n.src})},s.readAsDataURL(n)}this.$refs.fileInput.value=""}},watch:{editable:function(){this.editor.setOptions({editable:this.editable})},shouldShowFloatingMenu:function(){var t=this.editor.state.doc.content.content;2===t.length&&this.editor.setOptions({})}},computed:{hasLock:function(){return Object(p["contains"])(this.editor.view.state.doc,this.editor.schema.nodes.lock)}}}),R=z,B=(n("720e"),Object(j["a"])(R,o,r,!1,null,null,null)),W=B.exports,K={name:"App",components:{Article:W}},q=K,J=Object(j["a"])(q,s,a,!1,null,null,null),V=J.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(V)}}).$mount("#app")},"720e":function(t,e,n){"use strict";var i=n("a60b"),s=n.n(i);s.a},a60b:function(t,e,n){}});
//# sourceMappingURL=app.7d0b86e5.js.map